\subsection{Refinement}

Let the abstract predicate transformer $\hat N \in \Q \rightarrow \Q$ be an abstract interpretation of the earlier circuit model $N$, where $\Q$ is an abstract predicate for which there exists a Galois connection to $\pow(\D)$.

Let equivalent predicates in $\PP$ be identified by a function $\veq{\cdot} \in \PP \rightarrow \PP$, such that $\veq{\cdot}$ (?) preserves bottom, i.e. $\veq{\bot} = \bot$; (1) is idempotent, i.e. $\veq{(\veq{\hat p})} = \veq{\hat p}$; (2) is monotonic, i.e. $\hat p \sqsubseteq \hat q \implies \veq{\hat p} \sqsubseteq \veq{\hat q}$; and (3) \todo{name}, i.e. $\veq{\hat p} \sqsubseteq \veq{\hat q} \iff \hat p \sqsubseteq \veq{\hat q}$.

Let there exist a Galois connection between $\PP$ and $\Q$, given by the usual functions for abstraction $\hat \alpha \in \PP \rightarrow \Q$ and concretisation $\hat \gamma \in \Q \rightarrow \PP$, such that $\hat \alpha(\hat p) \sqsubseteq \hat q \iff \hat p \subseteq \hat \gamma(\hat q)$ for all $\hat p \in \PP$ and $\hat q \in \Q$.

Let the binary relation $\lll \, \subseteq \PP \times \Q$ be derived from the above $\hat \alpha$ or $\hat \gamma$:

\begin{equation*}
\hat p \lll \hat q \iff \hat \alpha(\veq{\hat p}) \sqsubseteq \veq{\hat q} \vsep \hat p \lll \hat q \iff \veq{\hat p} \sqsubseteq \hat \gamma(\veq{\hat q})
\end{equation*}

\noindent Here $\sqsubseteq$ on $\hat \alpha$-derivation side is the partial order of $\Q$, and on the $\hat \gamma$-derivation side $\sqsubseteq$ is the partial order of $\PP$.

Finally, we say that $\hat M$ refines $\hat N$ by \textit{lattice-theoretic simulation}, denoted by $\hat M \LatRefines \hat N$, iff (1) $\lll$ is a simulation relation, i.e. $\hat p \lll \hat q \implies \hat M(\hat p) \lll \hat N(\hat q)$. That $\lll$ is a simulation relation can also be stated directly in terms of the usual functions for abstraction, $\hat \alpha(\veq{\hat M(\hat p)}) \sqsubseteq \veq{\hat N(\hat \alpha(\hat p))}$ for all $\hat p \in \PP$, or concretisation, $\veq{\hat M(\hat \gamma(\hat q))} \sqsubseteq \hat \gamma(\veq{\hat N(\hat q)})$ for all $\hat q \in \Q$.

\begin{theorem} \label{thm:lat-refines}
$\hat M \LatRefines \hat N \implies (\hat N \LatModels \hat \ETA \implies \hat M \LatModels \hat \gamma(\hat \ETA))$
\end{theorem}

\begin{theorem} \label{thm:lat-imply-set}
$\hat M \LatRefines \hat N \implies M \SetRefines N$
\end{theorem}
